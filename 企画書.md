# 開発要件定義書：Pattern Language Home

> **コンセプト：「知恵のライブラリ」**  
> 様々な分野の実践知を、本のように体系的に読むことも、知恵の粒として横断的に探すこともできる場所。

---

## 0. パターン・ランゲージとは

> 詳細は [パターンとは.md](./パターンとは.md) を参照

ある領域の「よい実践」や「成功事例」の背後にある**「コツ」**を抽出し、再利用可能な形式で記述した知識体系。

### パターンの構成要素

| 要素 | 説明 | UIでの扱い |
|------|------|------------|
| **パターン名** | 知恵を呼び表す名前 | 最も大きく表示 |
| **導入文** | 内容を一言で表す | 副題として |
| **イラスト** | 概念を象徴する一枚絵 | **視覚的アンカー**（視線の中心） |
| **状況** | 使われる場面 | 「▼その状況において」 |
| **問題** | 起こりがちな困難 | 「しかし〜」 |
| **解決** | 行動の核心（最重要） | **「▼そこで」**（強調） |
| **結果** | 実践後の未来像 | 「▼その結果」 |

---

## 1. 2つの閲覧モード

このアプリは、2つの異なる「読み方」を提供する。

### A. Language View（本として読む）

- 「楽天主義」「燕市まちづくり」など、特定のプロジェクトを選んで読む
- そのプロジェクトの世界観（テーマカラー、ロゴ）に没入する
- パターンを番号順（No.01, 02...）に辿る体験

### B. Pattern View（知恵として引く）

- すべてのプロジェクトのパターンがフラットに混ざり合う
- 「コミュニケーション」「企画」などのタグで横断検索
- 偶発的な発見（セレンディピティ）を促す

---

## 2. 画面構成

```
Home ─┬─→ Language View ─→ Pattern Detail
      │     （本を読む）
      │
      └─→ Pattern View  ─→ Pattern Detail
            （知恵を引く）
```

### A. ホーム画面

- アプリのコンセプトを伝える
- 2つの閲覧モードへ誘導
- **第一印象の設計**が命（ファーストビューでPattern Viewへ導線確保）

### B. Language View

- プロジェクトごとの世界観を反映
- パターン一覧を番号順に表示

### C. Pattern View

> [!IMPORTANT]
> **設計思想**  
> Pattern View は「パターンを探す場所」ではなく、**「知恵の膨大さに圧倒される場所」**。  
> 入った瞬間に「すげー」と声が出る体験を目指す。

- 3つの表示モード（星空・工場・グリッド）
- タグによるフィルタリング機能（予定）
- 体験重視のビジュアル演出

### D. Pattern Detail（詳細画面）

視線の流れを設計する：

1. **タイトル＋導入文** → 関心を引く
2. **イラスト** → イメージを定着させる
3. **状況→問題→解決→結果** → 物語として読ませる

---

## 3. デザインの方向性

> **採用スタイル：Neo Brutalism（Mono）**  
> 詳細は [デザイン.md](./デザイン.md) を参照

### 採用の理由

Phase 0のデザイン検討で複数案を比較し、以下の理由からNeo Brutalismを採用：

- **明快さ** — 太い線とハイコントラストで情報が直感的に伝わる
- **遊び心** — アニメーションとの相性が良く、触って楽しい
- **拡張性** — ルールがシンプルなので、新画面でもブレない

### 基本ルール

| ルール | 内容 |
|--------|------|
| カラー | モノクロ基調（白背景 + 黒テキスト） |
| ボーダー | 2-3pxの黒実線 |
| シャドウ | ハードシャドウ（blur無し、オフセット6-8px） |
| 角丸 | 使わない（0px） |
| アニメーション | 全インタラクティブ要素に必須 |

### 禁止事項

- ❌ ドロップシャドウ（blur系）
- ❌ グラデーション
- ❌ 薄いグレーの文字
- ❌ アニメーションなしのボタン

### アクセントカラーの使用（追加ルール）

- 重要なCTAには**青系アクセント（#2563eb）**を使用可
- 各Languageのテーマカラーは当該Language内でのみ使用

---

## 4. UX設計方針（開発で見えてきた学び）

### 🏠 ホーム画面

| 原則 | 説明 |
|------|------|
| **ファーストビュー優先** | スクロールなしでメイン機能へアクセス可能に |
| **プレミアム感** | 安っぽくない、信頼できるWebサイトの印象 |
| **優先度の明確化** | Pattern View > Language View > 占い > About |

### 🔍 Pattern View

| 原則 | 説明 |
|------|------|
| **体験重視** | 機能より「すげー」という感動が先 |
| **3モード切替** | 用途に応じて表示を変更可能 |
| **動きの演出** | 静止画面より、常に動いている状態が理想 |

### 📱 レスポンシブ

| 原則 | 説明 |
|------|------|
| **PC余白の活用** | maxWidth 900pxで広く使う |
| **スマホ最適化** | 縦並びレイアウト、タップしやすいサイズ |

---

## 5. 技術スタック

- **Framework:** Next.js (App Router), TypeScript, Tailwind CSS v4
- **Animation:** Framer Motion
- **Content:** JSONファイルで管理（シンプル・明快）
  - `assets/{language_id}_patterns.json`
  - 将来、リッチテキストが必要になればMDXに移行可能

---

## 6. 開発の進め方

### AI（Antigravity）に渡す戦略

1. **構造を先に教える** — パターンとは.mdを読ませてから開発開始
2. **画像で正解を見せる** — 楽天主義の画像をアップし、余白感を参考にさせる
3. **コンポーネント単位で進める**：
   1. `PatternCard` — カード1枚を完璧に
   2. `PatternDetail` — 詳細の読む体験を作り込む
   3. `GridSystem` — それらを並べる画面を作る

### 開発Phase

| Phase | 内容 | 成果物 | 状態 |
|-------|------|--------|------|
| **0** | デザイン検討 | ホーム画面プロトタイプ | ✅ 完了 |
| **1** | 基盤構築 | 型定義、JSONローダー | ✅ 完了 |
| **2** | コンポーネント | PatternCard、PatternDetail | ✅ 完了 |
| **3** | 画面実装 | Home、Language View、Pattern View | ✅ 完了 |
| **4** | コンテンツ投入 | 全パターンのデータ確認 | ✅ 完了 |
| **5** | デザイン改善 | 背景演出、アニメーション強化 | ✅ 完了 |
| **6** | 体験の拡張 | Pattern View 3モード、占い機能 | ✅ 完了 |
| **7** | 継続改善 | Pattern View強化、Homeリデザイン | ✅ 完了 |
| **8** | History ページ | パターン・ランゲージの歴史解説 | 📝 次回 |

> 詳細は [アップデート手順書.md](./アップデート手順書.md) を参照

---

## 7. データ形式とフォルダ構造

### フォルダ構成

```
assets/
├── pdf/                    # 元データ（アーカイブ）
│   ├── PL楽天主義実践パターン.pdf
│   └── 燕市カードfin.pdf
│
├── illustrations/          # イラスト画像
│   ├── rakuten/            # 楽天主義用（30枚 PNG変換済み）
│   │   └── {番号}.{カテゴリ}{番号}_{パターン名}.png
│   └── tsubame/            # 燕市用（21枚）
│       └── {番号}_{パターン名}_白背景.PNG
│
├── rakuten_patterns.json   # 楽天のテキストデータ
└── tsubame_patterns.json   # 燕市のテキストデータ
```

### JSONデータ形式

新しいLanguageを追加する際は、以下の形式に従う：

```json
[
  {
    "id": 1,
    "pattern_name": "パターン名",
    "context": "状況の説明",
    "problem": "問題の説明",
    "solution": "解決策の説明"
  }
]
```

| フィールド | 必須 | 説明 |
|-----------|------|------|
| `id` | ✅ | 連番（1から始まる） |
| `pattern_name` | ✅ | パターンの名前 |
| `context` | ✅ | 「〜している」という状況 |
| `problem` | ✅ | 「しかし〜」という問題 |
| `solution` | ✅ | 「そこで〜」という解決策 |
| `intro` | ❌ | 一言の導入文（任意） |
| `consequence` | ❌ | 実践後の結果（任意） |
| `tags` | ❌ | タグの配列（任意） |

### イラストファイルの命名規則

```
{番号}_{パターン名}.png
```

例：
- `01_まずは近づく.png`
- `02_その人ばなし.png`

### 新しいLanguageを追加する手順

1. `assets/` に `{language_id}_patterns.json` を作成
2. `assets/illustrations/{language_id}/` にイラストを配置
3. JSONに全パターンのテキストを入力
4. イラストを命名規則に従ってリネーム
